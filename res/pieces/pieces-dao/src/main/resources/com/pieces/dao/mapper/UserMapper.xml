<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.pieces.dao.UserMapper" >

  <resultMap id="BaseResultMap" type="com.pieces.dao.model.User" >
    <id column="ID" property="id" jdbcType="DECIMAL" />
    <result column="userName" property="userName" jdbcType="VARCHAR" />
    <result column="password" property="password" jdbcType="VARCHAR" />
    <result column="salt" property="salt" jdbcType="VARCHAR" />
    <result column="companyFullName" property="companyFullName" jdbcType="VARCHAR" />
    <result column="provinceCode" property="provinceCode" jdbcType="VARCHAR" />
    <result column="cityCode" property="cityCode" jdbcType="VARCHAR" />
    <result column="countyCode" property="countyCode" jdbcType="VARCHAR" />
    <result column="contactName" property="contactName" jdbcType="VARCHAR" />
    <result column="contactMobile" property="contactMobile" jdbcType="VARCHAR" />
    <result column="status" property="status" jdbcType="DECIMAL" />
    <result column="createTime" property="createTime" jdbcType="TIMESTAMP" />
    <result column="updateTime" property="updateTime" jdbcType="TIMESTAMP" />
    <result column="roleId" property="roleId" jdbcType="VARCHAR" />
    <result column="roleName" property="roleName" jdbcType="VARCHAR" />
  </resultMap>
  <!-- 查询user -->
  <select id="findUserByCondition" parameterType="com.pieces.dao.model.User" resultMap="BaseResultMap">
  		select * from User b 
  		where 1=1
  		<if test="userName != null" >
  			and b.userName = #{userName, jdbcType=VARCHAR}
  		</if>
  		<if test="status != null" >
  			and b.status = #{status, jdbcType=DECIMAL}
  		</if>
  		<if test="companyFullName != null" >
  			and b.companyFullName = #{companyFullName, jdbcType=VARCHAR}
  		</if>
  		<if test="contactMobile != null" >
  			and b.contactMobile = #{contactMobile, jdbcType=VARCHAR}
  		</if>
  		<if test="contactName != null" >
  			and b.contactName = #{contactName, jdbcType=VARCHAR}
  		</if>
  </select>
  
  	<!-- 新增会员 -->
	<insert id="addUser" parameterType="com.pieces.dao.model.User" useGeneratedKeys="true" keyProperty="id">
		<![CDATA[
			insert into user
			(userName,password,salt,companyFullName,provinceCode,cityCode,countyCode,contactName,contactMobile,status,createTime,updateTime)
			values (#{userName,jdbcType=VARCHAR},
			#{password,jdbcType=VARCHAR},
			#{salt,jdbcType=VARCHAR},
			#{companyFullName,jdbcType=VARCHAR},
			#{provinceCode,jdbcType=VARCHAR},
			#{cityCode,jdbcType=VARCHAR},
			#{countyCode,jdbcType=VARCHAR},
			#{contactName,jdbcType=VARCHAR},
			#{contactMobile,jdbcType=VARCHAR},
			#{status,jdbcType=DECIMAL},
			#{createTime,jdbcType=TIMESTAMP},
			#{updateTime,jdbcType=TIMESTAMP}
			)
		]]>
	</insert>
</mapper>