<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.pieces.dao.UserMapper" >

  <resultMap id="BaseResultMap" type="com.pieces.dao.model.User" >
    <id column="ID" property="id" jdbcType="DECIMAL" />
    <result column="user_name" property="userName" jdbcType="VARCHAR" />
    <result column="password" property="password" jdbcType="VARCHAR" />
    <result column="salt" property="salt" jdbcType="VARCHAR" />
    <result column="company_full_name" property="companyFullName" jdbcType="VARCHAR" />
    <result column="province_code" property="provinceCode" jdbcType="VARCHAR" />
    <result column="city_code" property="cityCode" jdbcType="VARCHAR" />
    <result column="county_code" property="countyCode" jdbcType="VARCHAR" />
    <result column="contact_name" property="contactName" jdbcType="VARCHAR" />
    <result column="contact_mobile" property="contactMobile" jdbcType="VARCHAR" />
    <result column="status" property="status" jdbcType="DECIMAL" />
    <result column="create_time" property="createTime" jdbcType="TIMESTAMP" />
    <result column="update_time" property="updateTime" jdbcType="TIMESTAMP" />
    <result column="role_id" property="roleId" jdbcType="VARCHAR" />
    <result column="role_name" property="roleName" jdbcType="VARCHAR" />
  </resultMap>
  <!-- 查询user -->
  <select id="findUserByCondition" parameterType="com.pieces.dao.model.User" resultMap="BaseResultMap">
  		select * from user b 
  		where 1=1
  		<if test="userName != null" >
  			and b.user_name = #{userName, jdbcType=VARCHAR}
  		</if>
  		<if test="status != null" >
  			and b.status = #{status, jdbcType=DECIMAL}
  		</if>
  		<if test="companyFullName != null" >
  			and b.company_full_name = #{companyFullName, jdbcType=VARCHAR}
  		</if>
  		<if test="contactMobile != null" >
  			and b.contact_mobile = #{contactMobile, jdbcType=VARCHAR}
  		</if>
  		<if test="contactName != null" >
  			and b.contact_name = #{contactName, jdbcType=VARCHAR}
  		</if>
  </select>
  
  	<!-- 新增会员 -->
	<insert id="addUser" parameterType="com.pieces.dao.model.User" useGeneratedKeys="true" keyProperty="id">
		<![CDATA[
			insert into user
			(user_name,password,salt,company_full_name,province_code,city_code,county_code,contact_name,contact_mobile,status,create_time,update_time)
			values (#{userName,jdbcType=VARCHAR},
			#{password,jdbcType=VARCHAR},
			#{salt,jdbcType=VARCHAR},
			#{companyFullName,jdbcType=VARCHAR},
			#{provinceCode,jdbcType=VARCHAR},
			#{cityCode,jdbcType=VARCHAR},
			#{countyCode,jdbcType=VARCHAR},
			#{contactName,jdbcType=VARCHAR},
			#{contactMobile,jdbcType=VARCHAR},
			#{status,jdbcType=DECIMAL},
			#{createTime,jdbcType=TIMESTAMP},
			#{updateTime,jdbcType=TIMESTAMP}
			)
		]]>
	</insert>
</mapper>