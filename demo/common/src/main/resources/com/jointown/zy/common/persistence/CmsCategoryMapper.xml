<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "mybatis-3-mapper.dtd" >
<mapper namespace="com.jointown.zy.common.dao.CmsCategoryMapper">
	<resultMap id="BaseResultMap" type="com.jointown.zy.common.model.CmsCategory">
		<id column="ID" property="id" jdbcType="DECIMAL" />
		<result column="SITE_ID" property="siteId" jdbcType="DECIMAL" />
		<result column="PARENT_ID" property="parentId" jdbcType="DECIMAL" />
		<result column="CAT_LEVEL" property="catLevel" jdbcType="DECIMAL" />
		<result column="NAME" property="name" jdbcType="VARCHAR" />
		<result column="SORT" property="sort" jdbcType="DECIMAL" />
		<result column="IN_MENU" property="inMenu" jdbcType="DECIMAL" />
		<result column="IN_LIST" property="inList" jdbcType="DECIMAL" />
		<result column="ALLOW_COMMENT" property="allowComment"
			jdbcType="DECIMAL" />
		<result column="CUSTOM_LIST_VIEW" property="customListView"
			jdbcType="VARCHAR" />
		<result column="CUSTOM_CONTENT_VIEW" property="customContentView"
			jdbcType="VARCHAR" />
		<result column="CREATE_BY" property="createBy" jdbcType="VARCHAR" />
		<result column="CREATE_DATE" property="createDate" jdbcType="TIMESTAMP" />
		<result column="UPDATE_BY" property="updateBy" jdbcType="VARCHAR" />
		<result column="UPDATE_DATE" property="updateDate" jdbcType="TIMESTAMP" />
		<result column="REMARKS" property="remarks" jdbcType="VARCHAR" />
		<result column="DEL_FLAG" property="delFlag" jdbcType="DECIMAL" />
		<collection property="cmsArticlesCategoryId"
			ofType="com.jointown.zy.common.model.cms.CmsArticle" column="ID"
			select="com.jointown.zy.common.dao.CmsArticleMapper.selectByCategoryId" />
	</resultMap>
	<sql id="Base_Column_List">
		ID, SITE_ID, PARENT_ID, CAT_LEVEL, "NAME", SORT, IN_MENU, IN_LIST,
		ALLOW_COMMENT,
		CUSTOM_LIST_VIEW, CUSTOM_CONTENT_VIEW, CREATE_BY, CREATE_DATE, UPDATE_BY, UPDATE_DATE,
		REMARKS, DEL_FLAG
	</sql>
	<select id="selectByPrimaryKey" resultMap="BaseResultMap"
		parameterType="java.lang.Long">
		select
		<include refid="Base_Column_List" />
		from ZYC.CMS_CATEGORY
		where ID = #{id,jdbcType=DECIMAL}
	</select>

	<select id="getAllCmsCategoryByCmsSiteId" resultMap="BaseResultMap"
		parameterType="java.lang.Long">
		select
		ZYC.CMS_CATEGORY.ID as ID,
		ZYC.CMS_CATEGORY.SITE_ID as SITE_ID,
		ZYC.CMS_CATEGORY.PARENT_ID as PARENT_ID,
		ZYC.CMS_CATEGORY.CAT_LEVEL as CAT_LEVEL,
		ZYC.CMS_CATEGORY.NAME as NAME,
		ZYC.CMS_CATEGORY.SORT as SORT,
		ZYC.CMS_CATEGORY.IN_MENU as IN_MENU,
		ZYC.CMS_CATEGORY.IN_LIST as IN_LIST,
		ZYC.CMS_CATEGORY.ALLOW_COMMENT as ALLOW_COMMENT,
		ZYC.CMS_CATEGORY.CUSTOM_LIST_VIEW as CUSTOM_LIST_VIEW,
		ZYC.CMS_CATEGORY.CUSTOM_CONTENT_VIEW as CUSTOM_CONTENT_VIEW,
		ZYC.CMS_CATEGORY.CREATE_BY as CREATE_BY,
		ZYC.CMS_CATEGORY.CREATE_DATE as CREATE_DATE,
		ZYC.CMS_CATEGORY.UPDATE_BY as UPDATE_BY,
		ZYC.CMS_CATEGORY.UPDATE_DATE as UPDATE_DATE,
		ZYC.CMS_CATEGORY.REMARKS as REMARKS,
		ZYC.CMS_CATEGORY.DEL_FLAG as DEL_FLAG
		from ZYC.CMS_CATEGORY ,ZYC.CMS_SITE
		where ZYC.CMS_SITE.ID = #{id,jdbcType=DECIMAL}
		AND ZYC.CMS_CATEGORY.SITE_ID =ZYC.CMS_SITE.ID
		AND ZYC.CMS_SITE.DEL_FLAG='0'<!-- 该站点为有效的站点 -->
		AND ZYC.CMS_CATEGORY.DEL_FLAG='0'<!-- 该目录为有效的目录 -->
	</select>

	<delete id="deleteByPrimaryKey" parameterType="java.lang.Long">
		delete from ZYC.CMS_CATEGORY
		where ID = #{id,jdbcType=DECIMAL}
	</delete>
	<insert id="insert" parameterType="com.jointown.zy.common.model.CmsCategory">
		insert into ZYC.CMS_CATEGORY (ID, SITE_ID, PARENT_ID,
		CAT_LEVEL, "NAME", SORT,
		IN_MENU, IN_LIST, ALLOW_COMMENT,
		CUSTOM_LIST_VIEW, CUSTOM_CONTENT_VIEW, CREATE_BY,
		CREATE_DATE, UPDATE_BY, UPDATE_DATE,
		REMARKS, DEL_FLAG)
		values (Seq_Cms_Cat.Nextval, #{siteId,jdbcType=DECIMAL},
		#{parentId,jdbcType=DECIMAL},
		#{catLevel,jdbcType=DECIMAL}, #{name,jdbcType=VARCHAR}, #{sort,jdbcType=DECIMAL},
		#{inMenu,jdbcType=DECIMAL}, #{inList,jdbcType=DECIMAL},
		#{allowComment,jdbcType=DECIMAL},
		#{customListView,jdbcType=VARCHAR}, #{customContentView,jdbcType=VARCHAR}, #{createBy,jdbcType=VARCHAR},
		#{createDate,jdbcType=TIMESTAMP}, #{updateBy,jdbcType=VARCHAR},
		#{updateDate,jdbcType=TIMESTAMP},
		#{remarks,jdbcType=VARCHAR}, #{delFlag,jdbcType=DECIMAL})
	</insert>
	<insert id="insertSelective" parameterType="com.jointown.zy.common.model.CmsCategory">
		insert into ZYC.CMS_CATEGORY
		<trim prefix="(" suffix=")" suffixOverrides=",">
			ID,
			SITE_ID,
			PARENT_ID,
			CAT_LEVEL,
			"NAME",
			SORT,
			IN_MENU,
			IN_LIST,
			ALLOW_COMMENT,
			CUSTOM_LIST_VIEW,
			CUSTOM_CONTENT_VIEW,
			CREATE_BY,
			CREATE_DATE,
			UPDATE_BY,
			UPDATE_DATE,
			REMARKS,
			DEL_FLAG,
		</trim>
		<trim prefix="values (" suffix=")" suffixOverrides=",">
			Seq_Cms_Cat.Nextval,
			#{siteId,jdbcType=DECIMAL},
			#{parentId,jdbcType=DECIMAL},
			#{catLevel,jdbcType=DECIMAL},
			#{name,jdbcType=VARCHAR},
			#{sort,jdbcType=DECIMAL},
			#{inMenu,jdbcType=DECIMAL},
			#{inList,jdbcType=DECIMAL},
			#{allowComment,jdbcType=DECIMAL},
			#{customListView,jdbcType=VARCHAR},
			#{customContentView,jdbcType=VARCHAR},
			#{createBy,jdbcType=VARCHAR},
			#{createDate,jdbcType=TIMESTAMP},
			#{updateBy,jdbcType=VARCHAR},
			#{updateDate,jdbcType=TIMESTAMP},
			#{remarks,jdbcType=VARCHAR},
			#{delFlag,jdbcType=DECIMAL},
		</trim>
	</insert>
	<update id="updateByPrimaryKeySelective" parameterType="com.jointown.zy.common.model.CmsCategory">
		update ZYC.CMS_CATEGORY
		<set>
			<if test="siteId != null">
				SITE_ID = #{siteId,jdbcType=DECIMAL},
			</if>
			<if test="parentId != null">
				PARENT_ID = #{parentId,jdbcType=DECIMAL},
			</if>
			<if test="catLevel != null">
				CAT_LEVEL = #{catLevel,jdbcType=DECIMAL},
			</if>
			<if test="name != null">
				"NAME" = #{name,jdbcType=VARCHAR},
			</if>
			<if test="sort != null">
				SORT = #{sort,jdbcType=DECIMAL},
			</if>
			<if test="inMenu != null">
				IN_MENU = #{inMenu,jdbcType=DECIMAL},
			</if>
			<if test="inList != null">
				IN_LIST = #{inList,jdbcType=DECIMAL},
			</if>
			<if test="allowComment != null">
				ALLOW_COMMENT = #{allowComment,jdbcType=DECIMAL},
			</if>
			<if test="customListView != null">
				CUSTOM_LIST_VIEW = #{customListView,jdbcType=VARCHAR},
			</if>
			<if test="customContentView != null">
				CUSTOM_CONTENT_VIEW = #{customContentView,jdbcType=VARCHAR},
			</if>
			<if test="createBy != null">
				CREATE_BY = #{createBy,jdbcType=VARCHAR},
			</if>
			<if test="createDate != null">
				CREATE_DATE = #{createDate,jdbcType=TIMESTAMP},
			</if>
			<if test="updateBy != null">
				UPDATE_BY = #{updateBy,jdbcType=VARCHAR},
			</if>
			<if test="updateDate != null">
				UPDATE_DATE = #{updateDate,jdbcType=TIMESTAMP},
			</if>
			<if test="remarks != null">
				REMARKS = #{remarks,jdbcType=VARCHAR},
			</if>
			<if test="delFlag != null">
				DEL_FLAG = #{delFlag,jdbcType=DECIMAL},
			</if>
		</set>
		where ID = #{id,jdbcType=DECIMAL}
	</update>
	<update id="updateByPrimaryKey" parameterType="com.jointown.zy.common.model.CmsCategory">
		update ZYC.CMS_CATEGORY
		set SITE_ID = #{siteId,jdbcType=DECIMAL},
		PARENT_ID = #{parentId,jdbcType=DECIMAL},
		CAT_LEVEL = #{catLevel,jdbcType=DECIMAL},
		"NAME" = #{name,jdbcType=VARCHAR},
		SORT = #{sort,jdbcType=DECIMAL},
		IN_MENU = #{inMenu,jdbcType=DECIMAL},
		IN_LIST = #{inList,jdbcType=DECIMAL},
		ALLOW_COMMENT = #{allowComment,jdbcType=DECIMAL},
		CUSTOM_LIST_VIEW = #{customListView,jdbcType=VARCHAR},
		CUSTOM_CONTENT_VIEW = #{customContentView,jdbcType=VARCHAR},
		CREATE_BY = #{createBy,jdbcType=VARCHAR},
		CREATE_DATE = #{createDate,jdbcType=TIMESTAMP},
		UPDATE_BY = #{updateBy,jdbcType=VARCHAR},
		UPDATE_DATE = #{updateDate,jdbcType=TIMESTAMP},
		REMARKS = #{remarks,jdbcType=VARCHAR},
		DEL_FLAG = #{delFlag,jdbcType=DECIMAL}
		where ID = #{id,jdbcType=DECIMAL}
	</update>
</mapper>