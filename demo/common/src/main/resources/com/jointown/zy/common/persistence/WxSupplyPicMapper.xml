<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "mybatis-3-mapper.dtd" >
<mapper namespace="com.jointown.zy.common.dao.WxSupplyPicDao" >
  <resultMap id="BaseResultMap" type="com.jointown.zy.common.model.WxSupplyPic" >
    <id column="SUPPLY_PIC_ID" property="supplyPicId" jdbcType="DECIMAL" />
    <result column="SUPPLY_ID" property="supplyId" jdbcType="DECIMAL" />
    <result column="TYPE" property="type" jdbcType="DECIMAL" />
    <result column="STATUS" property="status" jdbcType="DECIMAL" />
    <result column="PICPATH" property="picPath" jdbcType="VARCHAR" />
    <result column="CREATE_TIME" property="createTime" jdbcType="TIMESTAMP" />
    <result column="UPDATE_TIME" property="updateTime" jdbcType="TIMESTAMP" />
  </resultMap>
  <sql id="Base_Column_List" >
    SUPPLY_PIC_ID, SUPPLY_ID, "TYPE", "STATUS", PICPATH, CREATE_TIME, UPDATE_TIME
  </sql>
  
  <!-- start 通过查询珍药材网第一张图片picpath值，得到supply_id的值 -->
  <select id="selectSupplyIdBySupplyPic" resultMap="BaseResultMap" parameterType="java.lang.String" >
    select 
    <include refid="Base_Column_List" />
    from WEIXIN.WX_SUPPLY_PIC
    where PICPATH = #{picPath,jdbcType=VARCHAR}
  </select>  
  <!-- end 通过查询珍药材网第一张图片picpath值，得到supply_id的值 -->
  <select id="selectAllBySupplyPic" resultMap="BaseResultMap" parameterType="java.lang.Long" >
    select 
    <include refid="Base_Column_List" />
    from WEIXIN.WX_SUPPLY_PIC
    where SUPPLY_ID = #{supplyId,jdbcType=DECIMAL}
    order by TYPE asc
  </select>  
  <!-- start 通过supply_id 查询 picpath图片相对路径值 -->
  
  <!-- end 通过supply_id 查询 picpath图片相对路径值 -->
  <select id="selectByPrimaryKey" resultMap="BaseResultMap" parameterType="java.lang.Long" >
    select 
    <include refid="Base_Column_List" />
    from WEIXIN.WX_SUPPLY_PIC
    where SUPPLY_PIC_ID = #{supplyPicId,jdbcType=DECIMAL}
  </select>
  <delete id="deleteByPrimaryKey" parameterType="java.lang.Long" >
    delete from WEIXIN.WX_SUPPLY_PIC
    where SUPPLY_PIC_ID = #{supplyPicId,jdbcType=DECIMAL}
  </delete>
  <insert id="insert" parameterType="com.jointown.zy.common.model.WxSupplyPic" >
    insert into WEIXIN.WX_SUPPLY_PIC (SUPPLY_PIC_ID, SUPPLY_ID, "TYPE", 
      "STATUS", PICPATH, CREATE_TIME, 
      UPDATE_TIME)
    values (WEIXIN.SEQ_WX_SUPPLY_PIC.nextval, #{supplyId,jdbcType=DECIMAL}, #{type,jdbcType=DECIMAL}, 
      #{status,jdbcType=DECIMAL}, #{picPath,jdbcType=VARCHAR}, #{createTime,jdbcType=TIMESTAMP}, 
      #{updateTime,jdbcType=TIMESTAMP})
  </insert>
  <insert id="insertSelective" parameterType="com.jointown.zy.common.model.WxSupplyPic" >
    insert into WEIXIN.WX_SUPPLY_PIC
    <trim prefix="(" suffix=")" suffixOverrides="," >
      SUPPLY_PIC_ID,
      SUPPLY_ID,
      "TYPE",
      "STATUS",
      PICPATH,
      CREATE_TIME,
      UPDATE_TIME,
    </trim>
    <trim prefix="values (" suffix=")" suffixOverrides="," >
      WEIXIN.SEQ_WX_SUPPLY_PIC.nextval,
      #{supplyId,jdbcType=DECIMAL},
      #{type,jdbcType=DECIMAL},
      #{status,jdbcType=DECIMAL},
      #{picPath,jdbcType=VARCHAR},
      #{createTime,jdbcType=TIMESTAMP},
      #{updateTime,jdbcType=TIMESTAMP},
    </trim>
  </insert>
  <update id="updateByPrimaryKeySelective" parameterType="com.jointown.zy.common.model.WxSupplyPic" >
    update WEIXIN.WX_SUPPLY_PIC
    <set >
      <if test="supplyId != null" >
        SUPPLY_ID = #{supplyId,jdbcType=DECIMAL},
      </if>
      <if test="type != null" >
        "TYPE" = #{type,jdbcType=DECIMAL},
      </if>
      <if test="status != null" >
        "STATUS" = #{status,jdbcType=DECIMAL},
      </if>
      <if test="picPath != null" >
        PICPATH = #{picPath,jdbcType=VARCHAR},
      </if>
      <if test="createTime != null" >
        CREATE_TIME = #{createTime,jdbcType=TIMESTAMP},
      </if>
      <if test="updateTime != null" >
        UPDATE_TIME = #{updateTime,jdbcType=TIMESTAMP},
      </if>
    </set>
    where SUPPLY_PIC_ID = #{supplyPicId,jdbcType=DECIMAL}
  </update>
  <update id="updateByPrimaryKey" parameterType="com.jointown.zy.common.model.WxSupplyPic" >
    update WEIXIN.WX_SUPPLY_PIC
    set SUPPLY_ID = #{supplyId,jdbcType=DECIMAL},
      "TYPE" = #{type,jdbcType=DECIMAL},
      "STATUS" = #{status,jdbcType=DECIMAL},
      PICPATH = #{picPath,jdbcType=VARCHAR},
      CREATE_TIME = #{createTime,jdbcType=TIMESTAMP},
      UPDATE_TIME = #{updateTime,jdbcType=TIMESTAMP}
    where SUPPLY_PIC_ID = #{supplyPicId,jdbcType=DECIMAL}
  </update>
  
  <select id="selectAllPicBySupplyId" resultMap="BaseResultMap" parameterType="java.lang.Long" >
    select SUPPLY_PIC_ID,TYPE,PICPATH
    from WEIXIN.WX_SUPPLY_PIC
    where SUPPLY_ID = #{SUPPLY_ID} 
    and STATUS = '0'
    order by TYPE
  </select>
  
</mapper>
  
  
